<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Emotion&Dopamine</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="https://cdn-icons-png.flaticon.com/512/727/727245.png">

<style>
*{box-sizing:border-box}
body{
  margin:0;
  background:#040406;
  color:#fff;
  font-family:Arial,Helvetica,sans-serif;
  overflow:hidden;
}

/* ===== BACKGROUND CANVAS ===== */
canvas{
  position:fixed;
  inset:0;
  z-index:0;
}

/* ===== HEADER ===== */
header{
  position:relative;
  z-index:2;
  text-align:center;
  padding-top:40px;
}
header h1{
  font-size:46px;
  letter-spacing:4px;
  animation:glow 3s infinite alternate;
}
header p{
  opacity:.7;
  margin-top:5px;
}

@keyframes glow{
  from{ text-shadow:0 0 10px #ff00ff;}
  to{ text-shadow:0 0 30px #00ffff;}
}

/* ===== PLAYERS ===== */
.players{
  position:relative;
  z-index:2;
  display:flex;
  justify-content:center;
  gap:35px;
  margin-top:50px;
  flex-wrap:wrap;
}

.player{
  text-align:center;
}

.play-btn{
  width:90px;
  height:90px;
  border-radius:50%;
  border:none;
  cursor:pointer;
  font-size:32px;
  color:#fff;
  background:linear-gradient(135deg,#ff00ff,#00ffff);
  box-shadow:0 0 25px rgba(255,0,255,.6);
  transition:.2s;
}
.play-btn:hover{
  transform:scale(1.08);
}

.genre{
  margin-top:10px;
  font-size:13px;
  letter-spacing:1px;
  opacity:.85;
}

/* ===== FOOTER ===== */
footer{
  position:fixed;
  bottom:10px;
  width:100%;
  text-align:center;
  font-size:12px;
  opacity:.6;
  z-index:2;
}

/* ===== FULLSCREEN BTN ===== */
#fs{
  position:fixed;
  top:15px;
  right:15px;
  z-index:3;
  padding:8px 14px;
  border-radius:20px;
  background:rgba(0,0,0,.6);
  color:#fff;
  border:1px solid #fff;
  cursor:pointer;
}
</style>
</head>

<body>

<canvas id="visual"></canvas>

<header>
  <h1>Emotion&Dopamine</h1>
  <p>Feel the vibe. Let the dopamine flow.</p>
</header>

<div class="players">
  <div class="player">
    <button class="play-btn" data-src="https://stream.zeno.fm/r8s232x3xg0uv">▶</button>
    <div class="genre">Happy Hardcore</div>
  </div>

  <div class="player">
    <button class="play-btn" data-src="https://rautemusik.stream25.radiohost.de/club">▶</button>
    <div class="genre">Hands Up</div>
  </div>

  <div class="player">
    <button class="play-btn" data-src="https://listen.technobase.fm/tunein-mp3">▶</button>
    <div class="genre">Hands Up 2</div>
  </div>

  <div class="player">
    <button class="play-btn" data-src="https://rautemusik.stream37.radiohost.de/rock">▶</button>
    <div class="genre">Rock</div>
  </div>

  <div class="player">
    <button class="play-btn" data-src="https://rautemusik.stream43.radiohost.de/metal_mp3-192">▶</button>
    <div class="genre">Metal</div>
  </div>
</div>

<footer>© 2026 Emotion & Dopamine</footer>

<button id="fs">⛶</button>

<audio id="audio" crossorigin="anonymous"></audio>

<script>
/* ===== AUDIO CONTROL (one at a time) ===== */
const audio = document.getElementById("audio");
const buttons = document.querySelectorAll(".play-btn");

buttons.forEach(btn=>{
  btn.onclick=()=>{
    buttons.forEach(b=>b.innerText="▶");
    if(audio.src!==btn.dataset.src){
      audio.src=btn.dataset.src;
      audio.play();
      btn.innerText="❚❚";
      ctxAudio.resume();
    }else{
      audio.pause();
      audio.src="";
    }
  };
});

/* ===== FULLSCREEN ===== */
document.getElementById("fs").onclick=()=>{
  if(!document.fullscreenElement){
    document.documentElement.requestFullscreen();
  }else{
    document.exitFullscreen();
  }
};

/* ===== VISUALIZER (FIXED – circle now reacts correctly) ===== */
const canvas=document.getElementById("visual");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

const ctxAudio=new (window.AudioContext||window.webkitAudioContext)();
const src=ctxAudio.createMediaElementSource(audio);
const analyser=ctxAudio.createAnalyser();
src.connect(analyser);
analyser.connect(ctxAudio.destination);
analyser.fftSize=256;

const data=new Uint8Array(analyser.frequencyBinCount);

function animate(){
  requestAnimationFrame(animate);
  analyser.getByteFrequencyData(data);

  ctx.fillStyle="rgba(0,0,0,.18)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  const cx=canvas.width/2;
  const cy=canvas.height/2;

  for(let i=0;i<data.length;i++){
    const angle=(i/data.length)*Math.PI*2;
    const radius=80 + data[i]*1.5;   // <<< FIXED REACTION
    const x=cx+Math.cos(angle)*radius;
    const y=cy+Math.sin(angle)*radius;

    ctx.beginPath();
    ctx.arc(x,y,3,0,Math.PI*2);
    ctx.fillStyle=`hsl(${i*3},100%,60%)`;
    ctx.fill();
  }
}
animate();

onresize=()=>{
  canvas.width=innerWidth;
  canvas.height=innerHeight;
};
</script>

</body>
</html>
